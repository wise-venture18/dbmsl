12) Teachers/Department/Students

#############12.Consider following structure for Mongodb collection and write a query for following
requirements in Mongodb
Teachers (Tname,dno,Experience,Salary,Date_of_Joining)
Department (Dno,Dname)
Students(Sname,Roll_No,Class)
1. Write a query to create above collection insert some sample documents.
2. Find the information about all teachers of Dno=2 and having salary greater than or equal to
10,000/-
3. Find the student information having Roll_no=2 or Sname='xyz'
4. Update student name whose Roll_No=5
5. Delete all student whose Class is 'FE' ###############
--------------------------------------------------------------------------------------------------------------------------
use school;
db.createCollection("Teachers");
db.Teachers.insertMany([
 {Tname:"A", dno:1, Experience:5, Salary:12000, Date_of_Joining:new Date("2020-06-01")},
 {Tname:"B", dno:2, Experience:8, Salary:18000, Date_of_Joining:new Date("2019-01-10")}
]);
db.Department.insertMany([{Dno:1,Dname:"CS"},{Dno:2,Dname:"IT"}]);
db.Students.insertMany([{Sname:"xyz",Roll_No:2,Class:"SE"},{Sname:"p",Roll_No:5,Class:"FE"}]);

db.Teachers.find({dno:2, Salary:{$gte:10000}});
db.Students.find({$or:[{Roll_No:2},{Sname:"xyz"}]});
db.Students.updateOne({Roll_No:5},{$set:{Sname:"updated"}});
db.Students.deleteMany({Class:"FE"});
db.Students.createIndex({Sname:1});




-------------------------------------------------------------------------------------

ğŸ“ PS12 â€” MongoDB Practical (Teachers, Department, Students)
ğŸ’¡ Aim:

Perform CRUD operations and use logical, comparison, and indexing concepts on multiple collections.

âœ… Step 1 â€” Insert Teachersâ€™ records
db.Teachers.insertMany([
  {Tname:"A", dno:1, Experience:5, Salary:12000, Date_of_Joining:new Date("2020-06-01")},
  {Tname:"B", dno:2, Experience:8, Salary:18000, Date_of_Joining:new Date("2019-01-10")}
]);

ğŸ” Explanation:

Creates a collection Teachers.

Inserts 2 documents.

Each document has:

Tname: Teacher name

dno: Department number

Experience: in years

Salary: salary amount

Date_of_Joining: a date field (using new Date())

âœ… Output:

{ acknowledged: true, insertedIds: { '0': ObjectId(...), '1': ObjectId(...) } }


âœ… Resulting Data:

[
  {Tname:"A", dno:1, Experience:5, Salary:12000, Date_of_Joining: ISODate("2020-06-01")},
  {Tname:"B", dno:2, Experience:8, Salary:18000, Date_of_Joining: ISODate("2019-01-10")}
]

âœ… Step 2 â€” Insert Department records
db.Department.insertMany([
  {Dno:1, Dname:"CS"},
  {Dno:2, Dname:"IT"}
]);

ğŸ” Explanation:

Creates Department collection.

Inserts department details (like foreign key in SQL terms).

Each department has a Dno (number) and Dname (name).

âœ… Output:

{ acknowledged: true, insertedIds: { '0': ObjectId(...), '1': ObjectId(...) } }


âœ… Resulting Data:

[
  {Dno:1, Dname:"CS"},
  {Dno:2, Dname:"IT"}
]

âœ… Step 3 â€” Insert Studentsâ€™ records
db.Students.insertMany([
  {Sname:"xyz", Roll_No:2, Class:"SE"},
  {Sname:"p", Roll_No:5, Class:"FE"}
]);

ğŸ” Explanation:

Creates Students collection.

Inserts 2 student documents with name, roll number, and class.

âœ… Output:

{ acknowledged: true, insertedIds: { '0': ObjectId(...), '1': ObjectId(...) } }


âœ… Resulting Data:

[
  {Sname:"xyz", Roll_No:2, Class:"SE"},
  {Sname:"p", Roll_No:5, Class:"FE"}
]

âœ… Step 4 â€” Query Teachers with dno=2 and Salary >= 10000
db.Teachers.find({dno:2, Salary:{$gte:10000}});

ğŸ” Explanation:

dno:2 â†’ filters teachers in Department 2.

$gte:10000 â†’ selects teachers whose salary â‰¥ 10000.

$gte means greater than or equal to.

âœ… Output:

[
  {Tname:"B", dno:2, Experience:8, Salary:18000, Date_of_Joining: ISODate("2019-01-10")}
]


âœ… Only Teacher B matches both conditions.

âœ… Step 5 â€” Query Students with OR condition
db.Students.find({$or:[{Roll_No:2},{Sname:"xyz"}]});

ğŸ” Explanation:

$or is a logical operator.

It returns documents where either Roll_No=2 OR Sname="xyz".

Both conditions point to the same document here.

âœ… Output:

[
  {Sname:"xyz", Roll_No:2, Class:"SE"}
]

âœ… Step 6 â€” Update one Studentâ€™s name
db.Students.updateOne({Roll_No:5},{$set:{Sname:"updated"}});

ğŸ” Explanation:

updateOne() â†’ modifies only the first document that matches.

{Roll_No:5} â†’ condition to find student.

$set:{Sname:"updated"} â†’ changes Sname to "updated".

âœ… Output:

{ acknowledged: true, matchedCount: 1, modifiedCount: 1 }


âœ… Now if you check:

db.Students.find();


Output:

[
  {Sname:"xyz", Roll_No:2, Class:"SE"},
  {Sname:"updated", Roll_No:5, Class:"FE"}
]

âœ… Step 7 â€” Delete students whose Class = "FE"
db.Students.deleteMany({Class:"FE"});

ğŸ” Explanation:

deleteMany() removes all documents matching the condition.

Condition â†’ Class = "FE".

âœ… Output:

{ acknowledged: true, deletedCount: 1 }


âœ… Remaining Data:

[
  {Sname:"xyz", Roll_No:2, Class:"SE"}
]

âœ… Step 8 â€” Create Index on Student Name
db.Students.createIndex({Sname:1});

ğŸ” Explanation:

Creates an index on Sname field for faster searches.

1 means ascending order.

Helps speed up future find() queries based on name.

âœ… Output:

{ "numIndexesBefore" : 1, "numIndexesAfter" : 2, "ok" : 1 }


âœ… Means index successfully created.


			                                        ğŸ§¾ Viva Q&A
Question						                                                                                 Answer
What is $gte?	 			                                                             	Comparison operator for â€œgreater than or equal toâ€.
What does $or do?      			            	                                         Combines multiple conditions â€” true if any condition matches.
What is $set used for?				                                                       To update or change a field value in a document.
Difference between updateOne() and updateMany()?	                             updateOne updates only the first matching record; updateMany updates all matching records.
What is the use of createIndex()?			                                          To make searches faster on that particular field.
What does deleteMany() do?				                                                 Deletes all documents matching the condition.
What data type is new Date("2020-06-01")?		Itâ€™s an ISODate object in MongoDB representing a date.
